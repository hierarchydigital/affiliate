<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Affiliate Landing Page</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="firebaseConfig.js"></script>
    <script type="module" src="scripts/trackClick.js" defer></script>
</head>
<body>
    <header>
        <h1>Welcome to Our Affiliate Program!</h1>
    </header>
    <main>
        <section>
            <h2>Special Offer for You!</h2>
            <p>Check out our amazing products!</p>
            <a href="affiliate.html" id="product-link">View Product</a>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Your Company Name. All rights reserved.</p>
    </footer>
    <script>
        // Function to track clicks when a user visits this page
        function trackClickFromAffiliateLink() {
            const urlParams = new URLSearchParams(window.location.search);
            const affiliateId = urlParams.get('affiliateId');
    
            if (affiliateId) {
                trackClick(affiliateId); // Call the function to log the click
            }
        }
    
        // When the page loads, check for affiliate ID and track click
        window.onload = function() {
            trackClickFromAffiliateLink();
            const affiliateId = new URLSearchParams(window.location.search).get('affiliateId');
            const productLink = document.getElementById('product-link');
            productLink.href = affiliateId ? `${window.location.origin}/product.html?affiliateId=${affiliateId}` : '/product.html';
        };
    </script>
</body>
</html>
